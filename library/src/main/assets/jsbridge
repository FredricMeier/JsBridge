(function(){function h(b,a){if(a){var c="cb_"+n++ +"_"+(new Date).getTime();f[c]=a;b.id=c}prompt("gl://request/"+JSON.stringify(b))}function k(b){setTimeout(function(){var a=JSON.parse(b),c;a.id&&(c=function(b){prompt("gl://response/"+JSON.stringify({id:a.id,data:b}))});var d=a.handlerName?l[a.handlerName]:e._requestHandler;if(void 0==d)console.log("WebViewJavascriptBridge: WARNING:no handler for ",a.handlerName);else try{d(a.data,c)}catch(p){console.error("WebViewJavascriptBridge: WARNING: javascript handler threw.",
p.stack)}})}if(!window.WebViewJavascriptBridge){var d=[],l={},f={},n=1,e=window.WebViewJavascriptBridge={init:function(b){if(e._requestHandler)throw Error("WebViewJavascriptBridge.init called twice");e._requestHandler=b;b=d;d=null;for(var a=0;a<b.length;a++)k(b[a])},send:function(b,a){h({data:b},a)},registerHandler:function(b,a){l[b]=a},callHandler:function(b,a,c){h({handlerName:b,data:a},c)},_handleRequestFromNative:function(b){d&&0<d.length?d.push(b):k(b)},_handleResponseFromNative:function(b){setTimeout(function(){var a=
JSON.parse(b),c=f[a.id];c&&(c(a.data),delete f[a.id])})}},m=document,g=m.createEvent("Events");g.initEvent("WebViewJavascriptBridgeReady");g.bridge=e;m.dispatchEvent(g);prompt("gl://pageLoaded/"+(0<window.location.host.length?"ok":"error"))}})();